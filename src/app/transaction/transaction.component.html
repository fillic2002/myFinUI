<!doctype html>
<div>
    <span value="H" (click)="onSelect(option)" style="font-size: 20px; cursor: pointer;">my<span style="color: orange; cursor: pointer;">f</span>in</span>
    <span class="title" style="padding-left: 30%;padding-top: 10px;">Investment</span>
    <span class="pipe" style="padding-left: 32%;" (click)="selectnext(option)">Bank Account Details</span>
    <span class="pipe" > | </span>
    <span class="pipe" (click)="selectnext(option)">Portfolio</span>
    <span class="pipe" > | </span>
    <span class="pipe" (click)="selectnext(option)">Tax</span>
    </div>
 <hr size="1"  color="lightgrey">  
  
<!--<div id="comment" class="comment">{{status}}</div>-->
<table style="width: 90%;" class="status">
    <tr >
        <td style="width: 20%;">
            <div style="padding-left: 20px;">            
                <select style="cursor: pointer; background-color: #eaea25de;"  id="portfolio" (change)="changeFolio($event)">
                <option value="0" >All</option>
                <option value="1" >Fillic_gov</option>
                <option value="2">Renuka</option>
                <option value="3">Fillic</option>
                <option value="4">Naitik</option>
                <option value="5">Kedar</option> 
                </select>
            </div> 
                   
            </td>
           <td>
               <div class="shatusContent2">{{eqtotal|number : '1.2-2'}}</div>               
            </td>
            <td style="width: 10%;"></td>
    </tr>
    <tr>
        <td>
            <div style="padding-left: 70px;">
            <input (click)="SelectAssetType('share')" type="radio" id="Share" name="equity" value="Share" checked> 
                <label for="Share">Share</label>
            <input (click)="SelectAssetType('MF')" type="radio" id="MF" name="equity" value="MF"> 
                 <label for="MF">MF</label>
             <input (click)="SelectAssetType('Gold')" type="radio" id="Gold" name="equity" value="Gold"> 
                 <label for="Gold">Gold</label>  
        </div>
        </td>
        <td>
            <span style="display: inline-block;width: 170px;padding:2px;">Net Investment</span>
        </td>
        <td>
            <span>
                <input (click)="selectInvstOption('y')" type="radio" id="yearly" name="option" value="yearly" checked> 
                <label for="yearly">Yearly</label>
                <input (click)="selectInvstOption('m')" type="radio" id="monthly" name="option" value="monthly" > 
                <label>Monthly</label>
            </span>
        </td>
    </tr>   
</table>
<br>
<app-common-yr></app-common-yr>
<ng-container *ngIf="show">
<table>
    <tr >        
        <td><span class="naming" style="font-weight: 600;padding-right: 3px;">Asset Type:</span>
            <select class="inputT" id="portfolio" (change)="changeAsset($event)">
                <option value="1" >Shares</option>
                <option value="2">Equity MF</option>
                <option value="3">PF</option>
                <option value="4">PPF</option>
                <option value="5">Debt MF</option>           
                <option value="8">Flat</option> 
                <option value="12">Gold</option> 
                <option value="7">Plot</option> 
                <option value="6">Bank</option> 
         </select>        
        
        <span class="naming" style="font-weight: 600;padding-right: 3px;" >Option:</span>
            <select id="option" class="inputT"  (change)="selectOption($event)"> 
            <option value="B">Buy</option> 
            <option value="S">Sell</option>
        </select>
        </td>        
        <td *ngIf="isShown"> 
            <span class="naming" style="font-weight: 600;padding-right: 3px;">Asset ID/Name:</span>
            <div style="z-index: -1" *ngIf="showresult"> 
                <div  id="result" *ngFor="let t of result">    
                    <span (click)="getId(t.id)" class="dt">{{t.id}}</span>
                    <span class="naming">{{t.fullName}}</span>                
                </div>
            </div>
            <input *ngIf="isShown" id="txtName" class="inputT" type="text"  (keypress)="getasset($event)" value="{{companyid}}" >
            
            <span class="naming" style="font-weight: 600;padding-right: 3px;">Date:</span>
                <input class="inputT" id="txtDt" type="date" (change)="changeDate($event)">
            <span class="naming" style="font-weight: 600;padding-right: 3px;">Quantity:</span>
                <input class="inputT" id="txtQty"  type="text"> 
            <span class="naming" style="font-weight: 600;padding-right: 3px;">Price:</span><input class="inputT" id="txtPrice"   type="text">
            <span class="naming" style="font-weight: 600;padding-right: 3px;">PB:</span><input class="inputT" id="txtPB"   type="text">
            <span class="naming" style="font-weight: 600;padding-right: 3px;">MarketCap:</span><input class="inputT" id="txtMaretCap"  type="text">
            <input class="savebtn" type="button" value="Save" (click)="AddTransaction()">
        </td>
    </tr>

</table>
</ng-container>
<div (click)="showTrans(option)" class="dml">{{trnStatus}}</div><br>
<table>
    <tr>
        <td><div style="width: 850px;height: 550px;" >
            <canvas baseChart 
            [datasets]="invstShrDataSet"
            [labels]="barChartLabels"
            [options]="barChartOptions"
            [plugins]="barChartPlugins"
            [legend]="barChartLegend"
            [colors]="barChartColors"
            [chartType]="barChartType"
            (chartClick)="chartClick($event)">            
            </canvas>                             
        </div></td>
        <td>
            <div style="width: 500px;height: 280px; float: left; padding-left: 40px;" >
                <canvas baseChart 
                [datasets]="pfDataSet"
                [labels]="pfChartLabels"
                [options]="pfChartOptions"
                [plugins]="pfChartPlugins"
                [legend]="pfChartLegend"
                [colors]="pfChartColors"
                [chartType]="pfChartType">
                </canvas>                             
            </div>
            <div style="width: 500px;height: 280px; float: left; padding-left: 40px;" >
                <canvas baseChart 
                [datasets]="ppfDataSet"
                [labels]="ChartLabels"
                [options]="ChartOptions"
                [plugins]="ChartPlugins"
                [legend]="ChartLegend"
                [colors]="ChartColors"
                [chartType]="ChartType">
                </canvas>                             
            </div></td>
        <td><!--<div style="width: 450px;height: 280px;" >
            <canvas baseChart 
            [datasets]="invstDebtDataSet"
            [labels]="barChartLabels2"
            [options]="barChartOptions2"
            [plugins]="barChartPlugins2"
            [legend]="barChartLegend2"
            [colors]="barChartColors2"
            [chartType]="barChartType2">
            </canvas>                             
        </div>--></td>
    </tr>
</table>
 
<table >
    <tr class="header1">
        <td (click)="sort('purchaseDt')" class="headerdt">Date of Purchase</td>
        <td class="headername">Equity Name</td>
        <td class="headeramt" (click)="sort('ID')"> ID</td>        
        <td class="headeramt">Quantity</td>
        <td class="headeramt">Purchase Price</td>
        <td class="headeramt" (click)="sort('ia')">Invested amt</td>
        <td class="headeramt" (click)="sort('pb')">PB</td>
        <td class="headeramt" (click)="sort('mc')">MarketCap</td>
        <td class="headeramt">Transation Type</td>
        <td class="headeramt">Action</td>
    </tr>

 <tr class="header2" *ngFor="let t of filterPortfolio">    
        <td class="dt">{{t.tranDate|date}}</td>
        <td class="naming">{{t.equityName}}</td>
        <td class="amt">{{t.equityId}}</td>
        
        <td class="amt">{{t.qty}}</td>
        <td class="amt">{{t.price|number : '1.2-2'}}</td>
        <td class="amt">{{t.qty*t.price|number : '1.2-2'}}</td>
        <td class="amt">{{t.pb|number : '1.2-2'}}</td>
        <td class="amt">{{t.marketCap|number : '1.2-2'}}</td>
        <td class="amt" [ngStyle]="{color: getTrColor(t.tranType)}">{{t.tranType}}</td>
        <td (click)="deleterecord(t.equityId, t.tranDate)" style="cursor: pointer" class="action" >Delete</td>
    </tr>
 
</table>
<table id="status" class="popup">
    <tr>
        <td colspan="2" (click)="hideShareDetails()" style="text-align: right;cursor: pointer;font-weight: bold;">X</td>
    </tr>
    <tr>
        <td colspan="2" > {{status}}     
        </td>
    </tr>
</table>
